<!DOCTYPE html>
<html lang="zh-CN">





<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="description" content="个人学习生活博客,寻志同道合朋友相互学习,共同进步.">
  <meta name="author" content="Cray">
  <meta name="keywords" content>
  <title>CrayBlog</title>

  <link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="/lib/mdbootstrap/css/mdb.min.css">
<link rel="stylesheet" href="/lib/github-markdown/github-markdown.min.css">
<link rel="stylesheet" href="https://at.alicdn.com/t/font_1067060_qzomjdt8bmp.css">


  <link rel="stylesheet" href="/lib/prettify/tomorrow-night-eighties.min.css">

<link rel="stylesheet" href="/css/main.css">


  <link rel="stylesheet" href="/lib/fancybox/jquery.fancybox.min.css">


  



</head>


<body>
  <header style="height: 100vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>CrayBlog</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/">Home</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/archives/">Archives</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/categories/">Categories</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/tags/">Tags</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/about/">About</a>
          </li>
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>


</nav>

    <div class="view intro-2" id="background"
         style="background: url('http://ww1.sinaimg.cn/large/006vdr71gy1g9nzcjtisnj33h025w7wj.jpg')no-repeat center center;
           background-size: cover;
           background-attachment: fixed;">
      <div class="full-bg-img">
        <div class="mask rgba-black-light flex-center">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
          </div>

          
            <div class="scroll-down-bar">
              <i class="fa fa-angle-down scroll-down-arrow"></i>
            </div>
          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      <div class="container nopadding-md">
        <div class="py-5 z-depth-3" id="board">
          
          <div class="container">
            <div class="row">
              <div class="col-12 col-md-10 m-auto">
                


  <div class="row mb-4 mx-auto">
    
    
      <div class="col-12 col-md-4 m-auto">
        <a href="/2020/03/01/shellcode基础/" target="_self">
          <img src="https://cdn.jsdelivr.net/gh/L0yy/tuchuang/Img/20200302103202.png" srcset="/img/loading.gif" alt="Shellcode基础" class="img-fluid rounded z-depth-3 index-thumbnails">
        </a>
      </div>
    
    <div class="col-12 col-md-8 m-auto">
      <a href="/2020/03/01/shellcode基础/">
        <p class="h4 index-header">Shellcode基础</p>
        
        
          
        
        <div class="index-excerpt" >
          <div class="index-text mb-1">shellcode 基础参考微软官方文档
几个特性：


.NET Core可跨平台，powershell6可在Mac Linux平台使用，大气
Win10自带组建，功能强大


了解Powershell
输出基于对象
PowerShell cmdlet 旨在处理对象
在大多数情况下，可以使用标准 PowerShell 对象语法直接访问数据的各部分


命令系列是可扩展的
可以自己实现函数
支持批处理文件的脚本


PowerShell 处理控制台输入和显示
在cmdlet 后使用 -？可显示关于此命令的帮助


PowerShell 使用某些 C# 语法

了解powershell的名称 1. Cmdlet 使用谓词-名词的名称来减少命令记忆
 - [PowerShell 批准的谓词]( https://docs.microsoft.com/zh-cn/powershell/scripting/developer/cmdlet/approved-verbs-for-windows-powershell-commands?view=powershell-7 )
 2. Cmdlet 使</div>
        </div>
      </a>

      <div>
        
          <i class="iconfont icon-riqi2"></i>&nbsp;2020-03-01&nbsp;&nbsp;
        
        
        
          <i class="iconfont icon-tag"></i>
          
            <a href="/tags/shellcode">shellcode</a>&nbsp;
          
        
      </div>
    </div>
  </div>

  <div class="row mb-4 mx-auto">
    
    
    <div class="col-12 col-md-8 m-auto">
      <a href="/2020/02/19/sality感染修复方案/">
        <p class="h4 index-header"></p>
        
        
          
        
        <div class="index-excerpt" >
          <div class="index-text mb-1">整体结构

修复逻辑为：
首先模拟执行被感染后的OEP，拿到解密代码处的地址

一直往下，到达第一个ret就会跳往加密代码处

解密代码部分

解密代码约为0x1000字节左右,因为是有随机产生的指令，长度就不确定，但是有一个结束标记特征码为：81F9E2FE00000F8C????FFFFC3

到这就可以修复文件了
原始OEP保存在shellcode后的0x1774处
sizoOfImage也能找到，就能恢复了


</div>
        </div>
      </a>

      <div>
        
          <i class="iconfont icon-riqi2"></i>&nbsp;2020-02-19&nbsp;&nbsp;
        
        
        
      </div>
    </div>
  </div>

  <div class="row mb-4 mx-auto">
    
    
    <div class="col-12 col-md-8 m-auto">
      <a href="/2020/02/14/深入浅出汇编/">
        <p class="h4 index-header"></p>
        
        
          
        
        <div class="index-excerpt" >
          <div class="index-text mb-1">https://bbs.pediy.com/thread-77508.htmhttps://blog.csdn.net/Apollon_krj/article/details/77524601x86指令集设计上就只允许是寄存器和寄存器或寄存器和内存间移动
x86 profix:26：在指令序列里是：prefix部分，作用是调整内存操作数的段选择子66：在指令序列里是：prefix 部分，作用是调整操作数的缺省大小2E: CS3E: DS26: ES64: FS65: GS36: SSF0: locl指令F2: repneF3: rep repz






</div>
        </div>
      </a>

      <div>
        
          <i class="iconfont icon-riqi2"></i>&nbsp;2020-02-14&nbsp;&nbsp;
        
        
        
      </div>
    </div>
  </div>

  <div class="row mb-4 mx-auto">
    
    
    <div class="col-12 col-md-8 m-auto">
      <a href="/2020/01/09/ARM ARM64 x86/">
        <p class="h4 index-header"></p>
        
        
          
        
        <div class="index-excerpt" >
          <div class="index-text mb-1">几种不同CPU架构的区别
inter  复杂指令集 CISCARM 精简指令集 RISC 



类型
Inter
ARM



效率
完成复杂指令效率高，有独立的高级指令
高级指令全靠多条指令拼凑


功耗
超高性能
低功耗


docker run -it -p 443:443 -v ~/.msf4:/root/.msf4 -v /tmp/msf:/tmp/data remnux/metasploit
mates Break172.17.0.2
</div>
        </div>
      </a>

      <div>
        
          <i class="iconfont icon-riqi2"></i>&nbsp;2020-01-09&nbsp;&nbsp;
        
        
        
      </div>
    </div>
  </div>

  <div class="row mb-4 mx-auto">
    
    
    <div class="col-12 col-md-8 m-auto">
      <a href="/2019/12/23/调试androidLua的so文件/">
        <p class="h4 index-header"></p>
        
        
          
        
        <div class="index-excerpt" >
          <div class="index-text mb-1"></div>
        </div>
      </a>

      <div>
        
          <i class="iconfont icon-riqi2"></i>&nbsp;2019-12-23&nbsp;&nbsp;
        
        
        
      </div>
    </div>
  </div>

  <div class="row mb-4 mx-auto">
    
    
      <div class="col-12 col-md-4 m-auto">
        <a href="/2019/12/14/Android第一个CrakeMe/" target="_self">
          <img src="https://cdn.jsdelivr.net/gh/L0yy/tuchuang/lmg/20191216120851.png" srcset="/img/loading.gif" alt="Android逆向第一个CrakeMe" class="img-fluid rounded z-depth-3 index-thumbnails">
        </a>
      </div>
    
    <div class="col-12 col-md-8 m-auto">
      <a href="/2019/12/14/Android第一个CrakeMe/">
        <p class="h4 index-header">Android逆向第一个CrakeMe</p>
        
        
          
        
        <div class="index-excerpt" >
          <div class="index-text mb-1">自己写的第一个Android CrakeMe 也是为了练手
随意输入参数为错误，始入正确flag能打印Success

配合使用上一篇的流程破解
解包使用apktool解包

拿到了Smali文件
反编译这里使用jadx发编译
知道了成功会打印Success,直接搜索关键字就好了

双击进去后就可以看到关键的代码，可以使用引用查看函数调用情况
这里看到的JAVA代码是Smali反编译得到的，所以中文都是使用的Unicode表示,这也表示以后搜索代码中的关键字需要转化为Unicode字符集去搜索

很简单的逻辑就是改跳转，把 ==改为!=这类的相反的比较
我们不能直接修改JAVA代码，要修改JVM虚拟机读的Smali语句
这和你要破解windows程序，不能在IDA中直接改F5出来伪代码，要修改汇编一个道理
我们要修改的代码位置如下

找到相应的文件，使用编辑器打开，直接修改Smali语句就好了

这里将if-eqz修改为if-nez
然后保存退出
回编译APK这里需要将修改后的文件重新编译为APK，才能安装
使用命令
apktool b [Folder_Paht]

成功后会在Fold</div>
        </div>
      </a>

      <div>
        
          <i class="iconfont icon-riqi2"></i>&nbsp;2019-12-14&nbsp;&nbsp;
        
        
        
          <i class="iconfont icon-tag"></i>
          
            <a href="/tags/Android%E9%80%86%E5%90%91">Android逆向</a>&nbsp;
          
        
      </div>
    </div>
  </div>

  <div class="row mb-4 mx-auto">
    
    
      <div class="col-12 col-md-4 m-auto">
        <a href="/2019/12/14/android逆向一/" target="_self">
          <img src="https://cdn.jsdelivr.net/gh/L0yy/tuchuang/lmg/20191216120724.png" srcset="/img/loading.gif" alt="Android逆向原理 一" class="img-fluid rounded z-depth-3 index-thumbnails">
        </a>
      </div>
    
    <div class="col-12 col-md-8 m-auto">
      <a href="/2019/12/14/android逆向一/">
        <p class="h4 index-header">Android逆向原理 一</p>
        
        
          
        
        <div class="index-excerpt" >
          <div class="index-text mb-1">一套流程概述使用jadx反编译后找到修改的文件，通过apktool反编apk文件后，在文件中找到对应的smail文件，修改后使用apktool回编，然后再用jarsigner 签名生成的apk
开始apk本身可以使用压缩软件打开，打开后的目录

这样打开的文件结构肯定是查看不完整的，很多二进制文件也不能解析
反编译APKapktool:逆向apk工具集
jadx：用于从Android Dex和Apk文件生成Java源代码的命令行和GUI工具
AndroidKiller：和jadx一样，还可以直接修改smail语句后回编APK以及添加签名
使用apk反编译工具apktool,这里不推荐用AndroidKiller了
虽然他的反编很方便，但是连我的Android studio的Hello world程序都反编译不了，表示劝退好吧，而且也存在很多Bug
这里不得不安利一个超级好用的软件jadx，具体优点如下，使用方法也比较简单，去混淆的设置是真的好
jadx介绍
第一步jadx反编译我用jadx的目的是找到需要修改的具体文本，以及修改思路
修改后的值apktool 反编出smali使用命令
</div>
        </div>
      </a>

      <div>
        
          <i class="iconfont icon-riqi2"></i>&nbsp;2019-12-14&nbsp;&nbsp;
        
        
        
          <i class="iconfont icon-tag"></i>
          
            <a href="/tags/Android%E9%80%86%E5%90%91">Android逆向</a>&nbsp;
          
        
      </div>
    </div>
  </div>

  <div class="row mb-4 mx-auto">
    
    
      <div class="col-12 col-md-4 m-auto">
        <a href="/2019/12/10/数据统计网站/" target="_self">
          <img src="https://cdn.jsdelivr.net/gh/L0yy/tuchuang/Img/20191217101951.png" srcset="/img/loading.gif" alt="一个数据统计公司" class="img-fluid rounded z-depth-3 index-thumbnails">
        </a>
      </div>
    
    <div class="col-12 col-md-8 m-auto">
      <a href="/2019/12/10/数据统计网站/">
        <p class="h4 index-header">一个数据统计公司</p>
        
        
          
        
        <div class="index-excerpt" >
          <div class="index-text mb-1">数据是无价的，这里给一个可以查看目前操作系统，浏览器，搜索引擎等等的使用比例
最受欢迎的操作系统
windows 毫不意外的以87%的份额获得了第一
最受欢迎的搜索引擎
百度能这么多也基本都是国内的资源
以上数据全来源netmarketshare
</div>
        </div>
      </a>

      <div>
        
          <i class="iconfont icon-riqi2"></i>&nbsp;2019-12-10&nbsp;&nbsp;
        
        
        
          <i class="iconfont icon-tag"></i>
          
            <a href="/tags/%E5%85%B6%E4%BB%96">其他</a>&nbsp;
          
        
      </div>
    </div>
  </div>

  <div class="row mb-4 mx-auto">
    
    
      <div class="col-12 col-md-4 m-auto">
        <a href="/2019/12/07/简单PE加载器/" target="_self">
          <img src="https://cdn.jsdelivr.net/gh/L0yy/tuchuang/lmg/20191216121346.png" srcset="/img/loading.gif" alt="简单PE加载器" class="img-fluid rounded z-depth-3 index-thumbnails">
        </a>
      </div>
    
    <div class="col-12 col-md-8 m-auto">
      <a href="/2019/12/07/简单PE加载器/">
        <p class="h4 index-header">简单PE加载器</p>
        
        
          
        
        <div class="index-excerpt" >
          <div class="index-text mb-1">思路来源写Sality感染型病毒专杀时指令被严重混淆，通过加载PE 修改内存 跑一下解密算法效率是最高的。
很多病毒在运行的时候都会加载另一个主映像文件去执行，而不是创建进程，就很有意思
下面就是如何加载一个PE，再展开，最后修复执行的过程 
该函数主要是为了将文件映射到内存中，保证源程序安全
返回值是未展开文件在内存中的位置
LPBYTE LoadFileToMem(LPCSTR lpFilePath)
{
    //////////////////////////////////////////////////////////////////////////
    ////将源文件读到内存中                                                  ///
    //////////////////////////////////////////////////////////////////////////
    DWORD FileSize = 0;
    LPBYTE Buff = NULL;

    HANDLE hFil</div>
        </div>
      </a>

      <div>
        
          <i class="iconfont icon-riqi2"></i>&nbsp;2019-12-07&nbsp;&nbsp;
        
        
        
          <i class="iconfont icon-tag"></i>
          
            <a href="/tags/%E9%80%86%E5%90%91">逆向</a>&nbsp;
          
        
      </div>
    </div>
  </div>

  <div class="row mb-4 mx-auto">
    
    
      <div class="col-12 col-md-4 m-auto">
        <a href="/2019/11/18/DDK与WDK WDM的区别/" target="_self">
          <img src="https://cdn.jsdelivr.net/gh/L0yy/tuchuang/lmg/20191216120944.png" srcset="/img/loading.gif" alt="DDK与WDK WDM的区别" class="img-fluid rounded z-depth-3 index-thumbnails">
        </a>
      </div>
    
    <div class="col-12 col-md-8 m-auto">
      <a href="/2019/11/18/DDK与WDK WDM的区别/">
        <p class="h4 index-header">DDK与WDK WDM的区别</p>
        
        
          
        
        <div class="index-excerpt" >
          <div class="index-text mb-1">自己总结如下：


转载自：http://blog.sina.com.cn/s/blog_4b9eab320101b6yn.html
1.首先，先从基础的东西说起，开发WINDOWS下的驱动程序，需要一个专门的开发包，如：开发JAVA程序，我们可能需要一个JDK，开发WINDOWS应用程序，我们需要WINDOWS的SDK，现在开发WINDOWS下的驱动程序，我们需要一个DDK/WDK。
2.DDK（Driver Developer Kit）和WDK（Windows Driver Kit）的区别：
这个要说说驱动相关的一些历史:
1).95/98/ME下，驱动模型为：Vxd，相关资料可以看《编程高手箴言》的前几个章节，里面有很详细的介绍，虽然这个东西已经过时，但大概看看还是会增长见识的。

2).2000/XP/2003下，Windows采用WDM驱动模型（Windows Driver Model），开发2000/XP/2003的驱动开发包为：DDK。

WDM驱动无非是微软在NT式驱动之上进行了扩充，过滤驱动也不例外 。

3).Vista及以后版本，采用了WDF驱动模型（Window</div>
        </div>
      </a>

      <div>
        
          <i class="iconfont icon-riqi2"></i>&nbsp;2019-11-18&nbsp;&nbsp;
        
        
        
          <i class="iconfont icon-tag"></i>
          
            <a href="/tags/%E5%86%85%E6%A0%B8">内核</a>&nbsp;
          
            <a href="/tags/%E9%A9%B1%E5%8A%A8%E5%AD%A6%E4%B9%A0">驱动学习</a>&nbsp;
          
        
      </div>
    </div>
  </div>



  <nav aria-label="index posts navigation">
    <ul class="pagination pg-blue justify-content-center mt-5">
      
      
      
        <li class="page-item">
          <a class="page-link" href="/page/2/#board">下一页</a>
        </li>
      
    </ul>
  </nav>



              </div>
            </div>
          </div>
        </div>
      </div>
    
  </main>

  
    <a class="z-depth-1" id="scroll-top-button" href="#" role="button">
      <i class="fa fa-chevron-up scroll-top-arrow" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  <footer class="mt-5">
  <div class="text-center py-3">
    <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><b>Hexo</b></a>
    <i class="iconfont icon-love"></i>
    <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"> <b>Fluid</b></a>
    <br>
    
  </div>
</footer>

<!-- SCRIPTS -->
<script src="/lib/jquery/jquery.min.js" ></script>
<script src="/lib/popper/popper.min.js" ></script>
<script src="/lib/bootstrap/js/bootstrap.min.js" ></script>
<script src="/lib/mdbootstrap/js/mdb.min.js" ></script>
<script src="/js/main.js" ></script>


  <script src="/js/lazyload.js" ></script>



  <script src="/lib/prettify/prettify.min.js" ></script>
  <script>
    $(document).ready(function () {
      $('pre').addClass('prettyprint  ');
      prettyPrint();
    })
  </script>



  <script src="/lib/typed/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "先学会爱自己，才能好好爱别人&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script src="/lib/anchor/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "false",
      
      icon: "§"
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      getSearchFile(path);
      this.onclick = null
    }
  </script>



  <script src="/lib/fancybox/jquery.fancybox.min.js" ></script>
  <script>
    $('#post').find('img').each(
      function () {
        var _this = $(this);
        var _src = _this.attr("src");
        _this.wrap('<a data-fancybox="images" href="' + _src + '" ></a>');
      }
    );
  </script>



  <script src="/lib/smooth-scroll/smooth-scroll.min.js" ></script>




</body>
</html>
